<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="792px" preserveAspectRatio="none" style="width:2431px;height:792px;background:#FFFFFF;" version="1.1" viewBox="0 0 2431 792" width="2431px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="668.3594" style="stroke:#181818;stroke-width:1.0;" width="10" x="224" y="69.9609"/><rect fill="#FFFFFF" height="607.6563" style="stroke:#181818;stroke-width:1.0;" width="10" x="384" y="100.3125"/><rect fill="#FFFFFF" height="546.9531" style="stroke:#181818;stroke-width:1.0;" width="10" x="544" y="130.6641"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1009" y="221.3672"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1269.5" y="161.0156"/><rect fill="#FFFFFF" height="194.0156" style="stroke:#181818;stroke-width:1.0;" width="10" x="1269.5" y="368.0313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1454.5" y="398.3828"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1454.5" y="531.6953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1454.5" y="604.6563"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1929" y="471.3438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="228.5" x2="228.5" y1="37.6094" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="388.5" x2="388.5" y1="37.6094" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="549" x2="549" y1="37.6094" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1014" x2="1014" y1="37.6094" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1144" x2="1144" y1="334.375" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1274" x2="1274" y1="37.6094" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1459.5" x2="1459.5" y1="37.6094" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1665.5" x2="1665.5" y1="437.6875" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1933.5" x2="1933.5" y1="37.6094" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2167.5" x2="2167.5" y1="571" y2="756.3203"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2341.5" x2="2341.5" y1="643.9609" y2="756.3203"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="172.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="179.5" y="26.5332">:PercursoRoute</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="113" x="172.5" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="179.5" y="776.8535">:PercursoRoute</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="320.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="327.5" y="26.5332">:PercursoController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="137" x="320.5" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="327.5" y="776.8535">:PercursoController</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="488" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="495" y="26.5332">:PercursoService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="488" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="495" y="776.8535">:PercursoService</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="959" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="966" y="26.5332">:ArmazemRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="959" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="966" y="776.8535">:ArmazemRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="1079" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1086" y="776.8535">percurso:Percurso</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="1220" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1227" y="26.5332">:PercursoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="1220" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1227" y="776.8535">:PercursoRepo</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1408.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1415.5" y="26.5332">:PercursoMap</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1408.5" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1415.5" y="776.8535">:PercursoMap</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="230" x="1550.5" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="1557.5" y="776.8535">percursoPer:IPercursoPersistence</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="287" x="1790.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="1797.5" y="26.5332">:Model&lt;IPercursoPersistence &amp; Document&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="287" x="1790.5" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="1797.5" y="776.8535">:Model&lt;IPercursoPersistence &amp; Document&gt;</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="2087.5" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="2094.5" y="776.8535">newPercurso: Percurso</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167" x="2258.5" y="755.3203"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="2265.5" y="776.8535">newDTO: IPercursoDTO</text><rect fill="#FFFFFF" height="668.3594" style="stroke:#181818;stroke-width:1.0;" width="10" x="224" y="69.9609"/><rect fill="#FFFFFF" height="607.6563" style="stroke:#181818;stroke-width:1.0;" width="10" x="384" y="100.3125"/><rect fill="#FFFFFF" height="546.9531" style="stroke:#181818;stroke-width:1.0;" width="10" x="544" y="130.6641"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1009" y="221.3672"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1269.5" y="161.0156"/><rect fill="#FFFFFF" height="194.0156" style="stroke:#181818;stroke-width:1.0;" width="10" x="1269.5" y="368.0313"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1454.5" y="398.3828"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1454.5" y="531.6953"/><rect fill="#FFFFFF" height="30.3516" style="stroke:#181818;stroke-width:1.0;" width="10" x="1454.5" y="604.6563"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1929" y="471.3438"/><ellipse cx="4.5" cy="69.2109" fill="none" rx="4" ry="4" style="stroke:#181818;stroke-width:1.5;"/><polygon fill="#181818" points="212,65.9609,222,69.9609,212,73.9609,216,69.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="9" x2="218" y1="69.9609" y2="69.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="12" y="65.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="186" x="23" y="65.1045">POST(.../api/percurso/adicionar)</text><polygon fill="#181818" points="372,96.3125,382,100.3125,372,104.3125,376,100.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="378" y1="100.3125" y2="100.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="241" y="95.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="252" y="95.4561">criarPercurso()</text><polygon fill="#181818" points="532,126.6641,542,130.6641,532,134.6641,536,130.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="394" x2="538" y1="130.6641" y2="130.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="401" y="125.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103" x="412" y="125.8076">criarPercurso(dto)</text><polygon fill="#181818" points="1257.5,157.0156,1267.5,161.0156,1257.5,165.0156,1261.5,161.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="554" x2="1263.5" y1="161.0156" y2="161.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="561" y="156.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311" x="572" y="156.1592">findByArmazens(armazemPartida, armazemChegada)</text><polygon fill="#181818" points="997,217.3672,1007,221.3672,997,225.3672,1001,221.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="554" x2="1003" y1="221.3672" y2="221.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="561" y="216.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="572" y="216.5107">findAll()</text><polygon fill="#181818" points="565,247.7188,555,251.7188,565,255.7188,561,251.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="559" x2="1013" y1="251.7188" y2="251.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="571" y="246.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="582" y="246.8623">armazensExistentes</text><line style="stroke:#181818;stroke-width:1.0;" x1="554" x2="596" y1="282.0703" y2="282.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="596" x2="596" y1="282.0703" y2="295.0703"/><line style="stroke:#181818;stroke-width:1.0;" x1="555" x2="596" y1="295.0703" y2="295.0703"/><polygon fill="#181818" points="565,291.0703,555,295.0703,565,299.0703,561,295.0703" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="561" y="277.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="430" x="572" y="277.2139">armazemExiste(armazemPartida,armazemChegada, armazensExistentes)</text><polygon fill="#181818" points="1067,321.4219,1077,325.4219,1067,329.4219,1071,325.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="554" x2="1073" y1="325.4219" y2="325.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="561" y="320.5654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="572" y="320.5654">create()</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="1079" y="303.0703"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="1086" y="324.6035">percurso:Percurso</text><polygon fill="#181818" points="1257.5,364.0313,1267.5,368.0313,1257.5,372.0313,1261.5,368.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="554" x2="1263.5" y1="368.0313" y2="368.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="561" y="363.1748">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="572" y="363.1748">save(percurso)</text><polygon fill="#181818" points="1442.5,394.3828,1452.5,398.3828,1442.5,402.3828,1446.5,398.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1279.5" x2="1448.5" y1="398.3828" y2="398.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1286.5" y="393.5264">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="1304.5" y="393.5264">toPersistence(percurso)</text><polygon fill="#181818" points="1538.5,424.7344,1548.5,428.7344,1538.5,432.7344,1542.5,428.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1459.5" x2="1544.5" y1="428.7344" y2="428.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1466.5" y="423.8779">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="1484.5" y="423.8779">create()</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="230" x="1550.5" y="406.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="216" x="1557.5" y="427.916">percursoPer:IPercursoPersistence</text><polygon fill="#181818" points="1917,467.3438,1927,471.3438,1917,475.3438,1921,471.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1279.5" x2="1923" y1="471.3438" y2="471.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1286.5" y="466.4873">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1304.5" y="466.4873">create(percursoPer)</text><polygon fill="#181818" points="1442.5,527.6953,1452.5,531.6953,1442.5,535.6953,1446.5,531.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1279.5" x2="1448.5" y1="531.6953" y2="531.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1286.5" y="526.8389">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1304.5" y="526.8389">toDomain(percursoPer)</text><polygon fill="#181818" points="2075.5,558.0469,2085.5,562.0469,2075.5,566.0469,2079.5,562.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1459.5" x2="2081.5" y1="562.0469" y2="562.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1466.5" y="557.1904">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="1484.5" y="557.1904">create()</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="161" x="2087.5" y="539.6953"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="147" x="2094.5" y="561.2285">newPercurso: Percurso</text><polygon fill="#181818" points="1442.5,600.6563,1452.5,604.6563,1442.5,608.6563,1446.5,604.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="554" x2="1448.5" y1="604.6563" y2="604.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="561" y="599.7998">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="579" y="599.7998">toDTO(newPercurso)</text><polygon fill="#181818" points="2246.5,631.0078,2256.5,635.0078,2246.5,639.0078,2250.5,635.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1459.5" x2="2252.5" y1="635.0078" y2="635.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1466.5" y="630.1514">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="1484.5" y="630.1514">create()</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="167" x="2258.5" y="612.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="2265.5" y="634.1895">newDTO: IPercursoDTO</text><polygon fill="#181818" points="405,673.6172,395,677.6172,405,681.6172,401,677.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="399" x2="548" y1="677.6172" y2="677.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="411" y="672.7607">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="429" y="672.7607">Success(newDTO)</text><polygon fill="#181818" points="245,703.9688,235,707.9688,245,711.9688,241,707.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="388" y1="707.9688" y2="707.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="251" y="703.1123">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="269" y="703.1123">Success(newDTO)</text><polygon fill="#181818" points="11,734.3203,1,738.3203,11,742.3203,7,738.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="5" x2="228" y1="738.3203" y2="738.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="17" y="733.4639">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="35" y="733.4639">Success(newDTO)</text><!--MD5=[a28fd24fff30415ce33f45ac9d62f9c8]
@startuml

autonumber

participant ":PercursoRoute" as R
participant ":PercursoController" as CTRL
participant ":PercursoService" as SERV
participant ":ArmazemRepo" as AREPO
participant "percurso:Percurso" as P
participant ":PercursoRepo" as REPO
participant ":PercursoMap" as MAP
participant "percursoPer:IPercursoPersistence" as PP
participant ":Model<IPercursoPersistence & Document>" as MPP
participant "newPercurso: Percurso" as NP
participant "newDTO: IPercursoDTO" as DTO

?o->R : POST(.../api/percurso/adicionar)
activate R
    R->CTRL: criarPercurso()
    activate CTRL
        CTRL->SERV: criarPercurso(dto)
        activate SERV
            SERV -> REPO: findByArmazens(armazemPartida, armazemChegada)
            activate REPO
            deactivate REPO
            SERV -> AREPO: findAll()
            activate AREPO
            AREPO - -> SERV: armazensExistentes
            deactivate AREPO
            SERV -> SERV: armazemExiste(armazemPartida,armazemChegada, armazensExistentes)
            SERV-> P**: create()
            SERV-> REPO: save(percurso)
            activate REPO
                REPO->MAP: toPersistence(percurso)
                activate MAP
                    MAP->PP**: create()
                deactivate MAP
                REPO->MPP: create(percursoPer)
                activate MPP
                deactivate MPP
                REPO->MAP: toDomain(percursoPer)
                activate MAP
                    MAP->NP**: create()
                deactivate MAP  
            deactivate REPO
            SERV-> MAP: toDTO(newPercurso)
            activate MAP
                MAP-> DTO**: create()
            deactivate MAP
            SERV- -> CTRL : Success(newDTO)
        deactivate SERV
        CTRL- ->R: Success(newDTO)
    deactivate CTRL
    <- -R: Success(newDTO)
deactivate R
@enduml

PlantUML version 1.2022.7(Mon Aug 22 18:01:30 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>